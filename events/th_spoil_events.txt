add_namespace = spoil_event
country_event = {
	#xuanwuchuan win root
	id = spoil_event.1
	title = spoil_event.1.t
	desc = spoil_event.1.d
	fire_only_once = no
	is_triggered_only = yes
	trigger = {
		69 = {
			is_controlled_by = ROOT
		}
		69 = {
			is_owned_by = var:ROOT.spoil_xiaxuanwucheng_target
		}
		ROOT = {
			has_country_flag = Spoil_xiaxuanwucheng
		}
	}
	
	option = {
		#革命
		name = spoil_event.1.1
		clr_country_flag = Spoil_xiaxuanwucheng
		if
		{
			limit = {
				has_idea = SGS_mic_spoil0_idea
			}
			swap_ideas = {
				remove_idea = SGS_mic_spoil0_idea
				add_idea = SGS_mic_spoil5_idea
			}
		}
		var:ROOT.spoil_xiaxuanwucheng_target = {
			#white_peace = ROOT
			country_event = {
				id = spoil_event.101
				days = 1
				random = 1
			}
		}
		ai_chance = {
			base = 35
		}
	}
}

country_event = {
	#xuanwuchuan lose root
	id = spoil_event.2
	title = spoil_event.2.t
	desc = spoil_event.2.d
	fire_only_once = no
	is_triggered_only = yes
	trigger = {
		69 = {
			NOT = {
				is_owned_by = ROOT
			}
		}
		ROOT = {
			has_country_flag = Spoil_xiaxuanwucheng
		}
		OR = {
			surrender_progress > 0.3
			has_country_flag = Spoil_xiaxuanwucheng_failed
		}
	}
	
	option = {
		#革命
		name = spoil_event.2.1
		trigger = {
			not = {
				controls_state = 69
			}
		}
		clr_country_flag = Spoil_xiaxuanwucheng
		set_country_flag = Spoil_xiaxuanwucheng_failed
		remove_mission = Spoil_mission_xiaxuanwucheng
		var:ROOT.spoil_xiaxuanwucheng_target = {
			#white_peace = ROOT
			country_event = {
				id = spoil_event.102
				days = 1
				random = 1
			}
		}
		ai_chance = {
			base = 35
		}
	}
}

country_event = {
	#xuanwuchuan stop root
	id = spoil_event.3
	title = spoil_event.3.t
	desc = spoil_event.3.d
	fire_only_once = no
	is_triggered_only = yes
	trigger = {
		has_country_flag = Spoil_xiaxuanwucheng
		or = {
			69 = {
				not = {
					is_controlled_by = ROOT
					is_controlled_by = var:ROOT.spoil_xiaxuanwucheng_target
				}
			}
			69 = {
				not = {
					is_owned_by = var:ROOT.spoil_xiaxuanwucheng_target
				}
			}
			not = {
				has_war_with = var:ROOT.spoil_xiaxuanwucheng_target
			}
		}
	}
	
	option = {
		#革命
		name = spoil_event.3.1
		clr_country_flag = Spoil_xiaxuanwucheng
		remove_mission = Spoil_mission_xiaxuanwucheng
		var:ROOT.spoil_xiaxuanwucheng_target = {
			#white_peace = ROOT
			country_event = {
				id = spoil_event.103
				days = 1
				random = 1
			}
		}
		ai_chance = {
			base = 35
		}
	}
}

country_event = {
	#xuanwuchuan
	id = spoil_event.101	# xuanwuchuan spoil win
	title = spoil_event.101.t
	desc = spoil_event.101.d
	fire_only_once = no
	is_triggered_only = yes
	option = {
		#革命
		name = spoil_event.2.2
		white_peace = FROM
		every_country = {
			limit = {
				is_in_faction_with = ROOT
				has_war_with = FROM
			}
			white_peace = FROM
		}
		every_country = {
			add_ai_strategy = {
				type = antagonize
				id = FROM
				value = -1
			}
			ROOT = {
				#is_in_faction_with = FROM
				add_ai_strategy = {
					type = dont_join_wars_with
					id = PREV
					target_country = FROM
					value = -9999
				}
			}
		}
		ai_chance = {
			base = 35
		}
	}
}

country_event = {
	#xuanwuchuan
	id = spoil_event.102	# xuanwuchuan spoil lose
	title = spoil_event.102.t
	desc = spoil_event.102.d
	fire_only_once = no
	is_triggered_only = yes
	option = {
		#革命
		name = spoil_event.102.1
		white_peace = FROM
		every_country = {
			limit = {
				is_in_faction_with = ROOT
				has_war_with = FROM
			}
			white_peace = FROM
		}
		every_country = {
			add_ai_strategy = {
				type = antagonize
				id = FROM
				value = -1
			}
			ROOT = {
				#is_in_faction_with = FROM
				add_ai_strategy = {
					type = dont_join_wars_with
					id = PREV
					target_country = FROM
					value = -9999
				}
			}
		}
		ai_chance = {
			base = 35
		}
	}
}

country_event = {
	#xuanwuchuan
	id = spoil_event.103	# xuanwuchuan spoil stop
	title = spoil_event.103.t
	desc = spoil_event.103.d
	fire_only_once = no
	is_triggered_only = yes
	option = {
		#革命
		name = spoil_event.103.1
		white_peace = FROM
		every_country = {
			limit = {
				is_in_faction_with = ROOT
				has_war_with = FROM
			}
			white_peace = FROM
		}
		every_country = {
			add_ai_strategy = {
				type = antagonize
				id = FROM
				value = -1
			}
			ROOT = {
				#is_in_faction_with = FROM
				add_ai_strategy = {
					type = dont_join_wars_with
					id = PREV
					target_country = FROM
					value = -9999
				}
			}
		}
		ai_chance = {
			base = 35
		}
	}
}
